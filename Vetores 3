/* Uma companhia aérea mantém uma lista de voos previstos, identificados pelo número de voo e outra para a quantidade de lugares ainda disponíveis em cada voo. 
Cada avião leva um total de até 345 passageiros. Faça um programa que: 
a. Inicialize a lista de voos para os valores 727, 442, 331, 447, 221, 291, inicialize a lista de lugares disponíveis para o valor máximo, 
b. Mostre um menu com as seguintes opções: listar voos previstos, fazer reserva, cancelar reserva e sair do programa. 
c. Faça reservas, indicando se ainda existem lugares disponíveis no voo citado. Se houver, o programa deve perguntar se o usuário quer confirmar a reserva. 
Se quiser, o número de lugares disponíveis para aquele voo deve ser decrementado. 
d. Desfaça reservas, incrementado o número de lugares disponíveis no voo correspondente. 
*/

#include <stdio.h>

#define NUM_PASSAGEIROS 345
#define QTDADE_VOOS 6

void main ()
{
	int voosPrevistos[] = {727, 442, 331, 447, 221, 291},
	lugaresDisponiveis[] = {NUM_PASSAGEIROS, NUM_PASSAGEIROS, NUM_PASSAGEIROS, NUM_PASSAGEIROS, NUM_PASSAGEIROS, NUM_PASSAGEIROS},
	i,				// contador
	opcao,			// opção do usuário
	certeza,		// confirma se reserva ou não
	voo,			// voo escolhido pelo usuário	
	posicaoVoo=-1;	// índice do voo escolhido pelo usuário
	
// cabeçalho
	printf("+++++++++++++++++\n");
	printf("Viacao Galera\n");
	printf("+++++++++++++++++\n");
	
// menu
	do{
		do{
			printf("\n\nMenu de opcoes: \n");
			printf("1 - Listas voos\n");
			printf("2 - Fazer reserva\n");
			printf("3 - Cancelar reserva\n");
			printf("4 - Sair\n");
			
			printf("Digite a sua opcao: \n");
			scanf("%d", &opcao);
			if(opcao<1 || opcao>4)
				printf("\t\nOpcao invalida\n\n");
		}while (opcao<1 || opcao>4); 
		
		switch (opcao)
		{
			case 1:
				printf("\n\n# Listando voos: \n");
				printf("Voo\t\tLugares disponiveis\n");
				for (i=0; i<QTDADE_VOOS; i++)
					printf("%d\t\t%d\n", voosPrevistos[i], lugaresDisponiveis[i]);
			break;
			
			case 2:
				printf("\n\n# Fazendo reserva:\n");
				printf("Digite o codigo do voo: ");
				scanf("%d", &voo);
				
				for (i=0; i<QTDADE_VOOS; i++)
				{
					if(voosPrevistos[i] == voo)
						posicaoVoo = i;
				}
				
				if(posicaoVoo == -1)
				{
					printf("\t\nVoo nao encontrado\n");
					break;
				}
				
				do{
					printf("Voce tem certeza da reserva? \n1 - sim \n2 - nao\n");
					scanf("%d", &certeza);
					if(certeza<1 || certeza>2)
						printf("\t\nValor invalido\n");
				}while (certeza<1 || certeza>2);
				
				if(certeza == 1 && lugaresDisponiveis[posicaoVoo] > 0)
				{
					lugaresDisponiveis[posicaoVoo]--;
					printf("\nReserva efetuada\n");
				}
				
				else
					printf("\nReserva nao efetivada ou voo lotado\n");
					
				posicaoVoo = -1;
			
			break;
			
			case 3:
				printf("\n\n# Cancelando reserva:");
				printf("Digite o codigo do voo: ");
				scanf("%d", &voo);
				
				for (i=0; i<QTDADE_VOOS; i++)
				{
					if(voosPrevistos[i] == voo)
						posicaoVoo = i;
				}
				
				if(posicaoVoo == -1)
				{
					printf("\t\nVoo nao encontrado\n");
					break;
				}
				
				if(lugaresDisponiveis[posicaoVoo] < NUM_PASSAGEIROS)
				{
					lugaresDisponiveis[posicaoVoo]++;
					printf("\nCancelamento efetuado\n");
				}
				else
					printf("\nO voo estah vazio\n");
					
				posicaoVoo = -1;				
			break;	
			
			default:
				printf("\n\nEncerrando o programa\n\n");				
		}
	}while (opcao!=4);
}
